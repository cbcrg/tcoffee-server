#{extends 'main.html' /}
#{set title:'T-Coffee | Your alignment result' /}

#{cache-warning /}

<h1>${result?.title} alignment result</h1> 

#{if result?.cite }
<div class="box">
<fieldset>
<h2>Citation</h2>
Please cite this result referring the papers at <a href="${result.cite.trim()}" target="_blank">this link</a>.
</fieldset>
</div>
#{/if}


#{if result?.items?.size > 0 }
<fieldset>
<h2>Result files 
<small>${result.items.size} output files - <a href="@{Application.zip(rid)}">download them all</a>
</small>
</h2>

#{result-items result /}
</fieldset>
#{/if}


#{if result?.alignmentFasta?.file }
<fieldset >
<h2>Send results
<small >Forward this result to other online tools.</small>
</h2>

<form id="sendto" name="sendto"  method="POST" target="_blank">
<input type="hidden" name="stage1" value="1" >
<input type="hidden" name="daction" value="PROTOGENE::Regular">
<input type="hidden" name="--msa" value="#{includefile result.alignmentFasta.file, escapeHtml:true /}" >
<input type="hidden" name="text" value="#{includefile result.alignmentFasta.file, escapeHtml:true /}" >

<p style="padding-bottom: 1em;" > 
<input type="button" id="to_ProtoGene" name="to_ProtoGene" value=" ProtoGene "  >
Turning amino acid alignments into bona fide CDS nucleotide alignments 
<br/><br/>
<input type="button" id="to_MyHits" name="to_MyHits" value=" MSA hub "  >
MyHits: a new interactive resource for protein annotation and domain identification
</p>
</form>

<script type="text/javascript">
$('#to_MyHits').click(function() { $('#sendto').attr('action','http://myhits.isb-sib.ch/cgi-bin/msa_hub').submit(); } );
$('#to_ProtoGene').click(function() { $('#sendto').attr('action','http://tcoffee.vital-it.ch/cgi-bin/Tcoffee/tcoffee_cgi/index.cgi').submit(); } );
</script>
</fieldset>
#{/if}


#{if result?.alignmentHtml?.file }
<fieldset>
<h2>MSA 
<small>The multiple sequence alignment result as produced by T-coffee.</small>
</h2>

<div id="result">
#{tcoffeeHtml result?.alignmentHtml?.file /}
</div>

<style type='text/css'> 
#result SPAN { font-family: "Vera Mono", courier new, courier-new, courier; font-weight: bold; font-size: 11pt;}
</style>

</fieldset>
#{/if}


<fieldset>
<h2>Info <small>Some information on this alignment job</small></h2>
<ul>
<li>Mode: <b>${result?.title}</b></li>
<li>Alignment ticket # <b>${rid}</b></li>
<li>Created at: <b>${ctx?.creationTimeFmt}</b></li>
<li>Elapsed time: <b>${result?.elapsedTimeFmt}</b></li>
<li>Expiration at: <b>${ctx?.expirationTimeFmt}</b></li>
</ul>
</fieldset>


#{if result?.commandLine?.file }
<fieldset>
<h2>Command Line
<small>This is the command line used to execute your alignment. You can use it as reference to run this alignment on your desktop.</small>
</h2>
<code >
#{includefile result.commandLine.file /}
</code>
</fieldset>
#{/if}

<fieldset>
<h2>Replay</h2>

Change some input parameters and resubmit this alignment <a href="@{Application.replay(rid)}" >clicking here</a>.
</fieldset>



